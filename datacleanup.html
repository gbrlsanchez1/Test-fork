<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="shortcut icon" href="images/harvard.ico" type="image/vnd.microsoft.icon" />
    <meta name="description" content="Cs109a datascience userratings team project : Team project - Applying Data Science best-practices to user-ratings.  Team members: Timur Zambalayev and Joshua Coffie">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>CS-109a - Intro to Datascience Team Project</title>
  </head>

  <body>

    <!-- HEADER -->
    <style>
    ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #333;
    }

    li {
        float: left;
    }

    li a {
        display: block;
        color: white;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
    }

    li a:hover {
        background-color: #111;
    }

    .active {
    background-color: #0090ff;
    }

    </style>
    </head>
    <body>

    <ul>
      <li><a href="/CS109a_DataScience_UserRatings_Team_Project/index.html">Home</a></li>
      <li><a href="/CS109a_DataScience_UserRatings_Team_Project/ourdataset.html">Dataset</a></li>
      <li><a class="active" href="/CS109a_DataScience_UserRatings_Team_Project/datacleanup.html">Data Cleanup</a></li>
      <li><a href="/CS109a_DataScience_UserRatings_Team_Project/ourbaselines.html">Baselines</a></li>
      <li><a href="/CS109a_DataScience_UserRatings_Team_Project/ourapproach.html">Approach</a></li>
      <li><a href="/CS109a_DataScience_UserRatings_Team_Project/ourmodel.html">Our Models</a></li>
      <li><a href="/CS109a_DataScience_UserRatings_Team_Project/references.html">References</a></li>
    </ul>

    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/starbuck10/CS109a_DataScience_UserRatings_Team_Project">View on GitHub</a>

          <h1 id="project_title">CS-109a - Intro to Datascience Team Project</h1>
          <h2 id="project_tagline">More on our Data Cleanup Process</h2>


            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/starbuck10/CS109a_DataScience_UserRatings_Team_Project/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/starbuck10/CS109a_DataScience_UserRatings_Team_Project/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Data Cleanup</h3>

<p>The first step in creating a workable dataset for this project was to combine the three datasets provided by MovieLens into a single, workable copy.  After importing the data from three separate datasets and joining those data frames by movieID, we could start the data cleanup process.</p>

<p>Cleaning the data from the source was simpler than we expected.  Since our dataset didn’t dive into lengthy reviews for each movie (which would require lengthy sentiment analysis processing) but captured user ratings, genre, and a short tag to describe the reviewer’s take on the film, we were fairly fortunate to not need a lengthy cleansing process.  Some films didn’t receive a genre tag and were subsequently tagged as ‘no genres listed.’  In this case, the data was temporarily converted into an empty string.  As we progress throughout the project, we will breakout the tagged genres into a predictive feature for each film (which will include removing the ‘|’ from each string) and use those responses to build our model.  For the purposes of initial analysis, the string was replaced with a blank value.  Otherwise, the dataset was particularly well-structured and documented, readily available in an easily consumable CSV format.</p>

<p>In Python, we can <code>import</code> and <code>merge</code> our initial datasets like this:</p>
<pre><code>
  Dataset = namedtuple('Dataset', ['ratings_df', 'movies_df', 'tags_df', 'links_df'])


  def date_parse(time_in_secs):
      return datetime.fromtimestamp(float(time_in_secs))


  def read_data():
      ratings_df = pd.read_csv('ml-latest-small/ratings.csv', parse_dates=['timestamp'], date_parser=date_parse)
      movies_df = pd.read_csv('ml-latest-small/movies.csv')
      tags_df = pd.read_csv('ml-latest-small/tags.csv', parse_dates=['timestamp'], date_parser=date_parse)
      links_df = pd.read_csv('ml-latest-small/links.csv')
      return Dataset(ratings_df, movies_df, tags_df, links_df)


  def explore_data(dataset):
      ratings_df = dataset.ratings_df
      movies_df = dataset.movies_df
      tags_df = dataset.tags_df
      links_df = dataset.links_df

      merged_movies_df = movies_df.merge(links_df)
      merged_ratings_df = ratings_df.merge(merged_movies_df)
      merged_tags_df = tags_df.merge(merged_movies_df)

      print 'raw ratings data:'
      display(ratings_df.head())
      print

      print 'raw movies data:'
      display(movies_df.head())
      print

      print 'raw tags data:'
      display(tags_df.head())
      print

      print 'raw links data:'
      display(links_df.head())
      print

      print 'merged movies data:'
      display(merged_movies_df.head())
      print

      print 'merged ratings data:'
      display(merged_ratings_df.head())
      print

      print 'merged tags data:'
      display(merged_tags_df.head())
      print


  dataset = read_data()

  explore_data(dataset)
</code></pre>

<p>The code above is a way to merge our datasets and provide a quick visual snapshot of how we're transforming it for our use.  Here is an example of our "Merged Ratings Data":</p>

<div style="display: flex; justify-content: center;">
  <img src="images/merged_ratings.png", alt="Merged Ratings Dataset", style="width:600px;height:250px;" />
</div>

<p>And this is what we find when we merge the tags data: </p>

<div style="display: flex; justify-content: center;">
  <img src="images/merged_tags.png", alt="Merged Tags Dataset", style="width:600px;height:250px;" />
</div>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">This page maintained by <a href="https://github.com/starbuck10">starbuck10</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a> by Octocat &copy; 2016</p>
      </footer>
    </div>



  </body>
</html>
